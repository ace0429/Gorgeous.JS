/*! Gorgeous.JS v0.0.1 2015-05-26 */
var gorgeous={};!function(a){function b(a,b,c){var d=a-b,e=a-c,f=b-c,g=Math.acos(.5*(d+e)/(Math.sqrt(d*d+e*f)+1e-5));return Math.round(255*(b>=c?g:2*Math.PI-g)/(2*Math.PI))}function c(a,b,c){var d=Math.min(a,b,c);return Math.round(255*(1-3*d/(a+b+c+1e-5)))}function d(a,b,c){return Math.round((a+b+c)/3)}a.loadImage=function(a,b){var c=new Image;return c.onload=function(a){b(c,a)},c.src=a,c},a.makeCanvasContext=function(a,b){if(!a||!b||0>a||0>b)throw new Error("Canvas width & height must be positive.");var c=document.createElement("canvas");return c.width=a,c.height=b,c.getContext("2d")},a.init=function(b,c,d){c=c||1,d=d||1,b.ctx=a.makeCanvasContext(c,d),b.width=c,b.height=d,b.nativeImageData=b.ctx.getImageData(0,0,c,d),b.data=b.nativeImageData.data,b.hsiData=null,b.__lastOperationType="rgb"},a.intensity=function(a,b,c){return d(a,b,c)},a.rgb2hsi=function(a,e,f){return{h:b(a,e,f),s:c(a,e,f),i:d(a,e,f)}},a.hsi2rgb=function(a,b,c){function d(a,b){return b*(1-a)}function e(a,b,c){return c*(1+b*Math.cos(a)/Math.cos(Math.PI/3-a))}function f(a,b,c){return 3*a-b-c}var g,h,i,j,k,l,m=120*Math.PI/180,n=240*Math.PI/180;return g=a/255*2*Math.PI,h=b/255,i=c,g>n?(g-=n,k=d(h,i),l=e(g,h,i),j=f(i,k,l)):g>m?(g-=m,j=d(h,i),k=e(g,h,i),l=f(i,k,j)):(l=d(h,i),j=e(g,h,i),k=f(i,j,l)),{r:Math.round(j),g:Math.round(k),b:Math.round(l)}}}(gorgeous),function(a){"use strict";function b(a,b,c){a.width=b,a.height=c,a.ctx.canvas.width=b,a.ctx.canvas.height=c}function c(a,b){d(a,b.getContext("2d"))}function d(a,b){h(a,b.getImageData(0,0,b.canvas.width,b.canvas.height))}function e(a,b,c){var d=new Image;d.onload=function(){f(a,d),"function"==typeof c&&c(a)},d.src=b}function f(a,c){var d=a.ctx;b(a,c.width,c.height),d.drawImage(c,0,0,c.width,c.height),a.pullChange()}function g(a,c){var d=a.ctx;b(a,c.width,c.height),d.putImageData(c.nativeImageData,0,0),a.pullChange()}function h(a,c){var d=a.ctx;b(a,c.width,c.height),d.putImageData(c,0,0),a.pullChange()}a.ImageData=function(b,i){if(!(this instanceof a.ImageData))return new a.ImageData(b,i);if(a.init(this),b instanceof Image)f(this,b);else if("string"==typeof b)e(this,b,i);else if(b instanceof HTMLCanvasElement)c(this,b);else if(b instanceof CanvasRenderingContext2D)d(this,b);else if(b instanceof a.ImageData)g(this,b);else{if(!(b instanceof ImageData))throw new Error("Need a source to create g.ImageData.");h(this,b)}},a.ImageData.prototype.toString=function(){return"[object g.ImageData] with width: "+this.width+"px, height: "+this.height+"px"},a.ImageData.prototype.getDataURL=function(){return this.ctx.canvas.toDataURL()},a.ImageData.prototype.getImage=function(a){var b=new Image;return b.onload=function(){"function"==typeof a&&a(b)},b.src=this.getDataURL(),b},a.ImageData.prototype.pushChange=function(){this.ctx.putImageData(this.nativeImageData,0,0),this.__lastOperationType="rgb"},a.ImageData.prototype.pullChange=function(){this.nativeImageData=this.ctx.getImageData(0,0,this.width,this.height),this.data=this.nativeImageData.data,this.__lastOperationType="rgb"}}(gorgeous),function(a){a.ImageData.prototype.updateHSI=function(){var b=this.data.length,c=this.data;this.hsiData||(this.hsiData=new Uint8ClampedArray(b));for(var d=this.hsiData,e=0;b>e;e+=4){var f=a.rgb2hsi(c[e],c[e+1],c[e+2]);d[e]=f.h,d[e+1]=f.s,d[e+2]=f.i,d[e+3]=c[e+3]}this.__lastOperationType="hsi"},a.ImageData.prototype.updateRGB=function(){if(!this.hsiData)throw new Error("There is no hsiData field yet.");for(var b=this.data.length,c=this.data,d=this.hsiData,e=0;b>e;e+=4){var f=a.hsi2rgb(d[e],d[e+1],d[e+2]);c[e]=f.r,c[e+1]=f.g,c[e+2]=f.b,c[e+3]=d[e+3]}this.pushChange(),this.__lastOperationType="hsi"},a.ImageData.prototype.getR=function(){for(var b=new a.ImageData(this),c=b.data,d=0;d<c.length;d+=4)c[d+1]=c[d+2]=0;return b.ctx.putImageData(b.nativeImageData,0,0),b},a.ImageData.prototype.getG=function(){for(var b=new a.ImageData(this),c=b.data,d=0;d<c.length;d+=4)c[d]=c[d+2]=0;return b.ctx.putImageData(b.nativeImageData,0,0),b},a.ImageData.prototype.getB=function(){for(var b=new a.ImageData(this),c=b.data,d=0;d<c.length;d+=4)c[d]=c[d+1]=0;return b.ctx.putImageData(b.nativeImageData,0,0),b},a.ImageData.prototype.getH=function(){"hsi"!==this.__lastOperationType&&this.updateHSI();for(var b=new a.ImageData(this),c=b.data,d=this.hsiData,e=0;e<c.length;e+=4)c[e]=d[e],c[e+1]=c[e+2]=0;return b.ctx.putImageData(b.nativeImageData,0,0),this.__lastOperationType="hsi",b},a.ImageData.prototype.getS=function(){"hsi"!==this.__lastOperationType&&this.updateHSI();for(var b=new a.ImageData(this),c=b.data,d=this.hsiData,e=0;e<c.length;e+=4)c[e+1]=d[e+1],c[e]=c[e+2]=0;return b.ctx.putImageData(b.nativeImageData,0,0),this.__lastOperationType="hsi",b},a.ImageData.prototype.getI=function(){"hsi"!==this.__lastOperationType&&this.updateHSI();for(var b=new a.ImageData(this),c=b.data,d=this.hsiData,e=0;e<c.length;e+=4)c[e+2]=d[e+2],c[e]=c[e+2]=0;return b.ctx.putImageData(b.nativeImageData,0,0),this.__lastOperationType="hsi",b}}(gorgeous),function(a){function b(a,b,c,d,e,f){return a=a||0,b=b||0,c=c||e-a,d=d||f-b,0>a||a>e||0>b||b>f||c+a>e||0>c||d+b>f||0>d?!1:[a,b,a+c,b+d]}function c(a,c,d,e,f,g,h){var i=b(c,d,e,f,a.width,a.height);if(!i)throw new Error("range error");c=i[0],d=i[1];for(var j=i[2],k=i[3],l=[],m=c;j>m;m++)l[m]=[];var n;h?(a.hsiData||a.updateHSI(),n=a.hsiData):n=a.data;for(var o=d;k>o;o++)for(var p=c;j>p;p++){l[p][o]={};var q=4*(o*a.width+p);g(l[p][o],n,q)}return l.left=c,l.top=d,l.width=e,l.height=f,l.right=j,l.bottom=k,l.each=function(a){for(var b=this.top;b<this.bottom;b++)for(var c=this.left;c<this.right;c++)a(this[c][b],c,b);return this},l.every=function(a,b){if(!(a instanceof Function))return!1;for(var c=this.top;c<this.bottom;c++)for(var d=this.left;d<this.right;d++)if(!a(this[d][c],d,c))return b instanceof Function&&b(this[d][c],d,c),!1;return!0},l}function d(a,b,c,d){var e;d?(a.hsiData||(a.hsiData=new Uint8ClampedArray(a.data.length)),e=a.hsiData):e=a.data;for(var f=b.top;f<b.bottom;f++)for(var g=b.left;g<b.right;g++){var h=4*(f*a.width+g);c(b[g][f],e,h)}d&&a.updateRGB(),a.pushChange()}a.ImageData.prototype.getPixels=function(a,b,d,e){return c(this,a,b,d,e,function(a,b,c){a.r=b[c],a.g=b[c+1],a.b=b[c+2],a.a=b[c+3]},!1)},a.ImageData.prototype.setPixels=function(a){d(this,a,function(a,b,c){b[c]=a.r,b[c+1]=a.g,b[c+2]=a.b,b[c+3]=a.a},!1)},a.ImageData.prototype.getHSIPixels=function(a,b,d,e){var f=c(this,a,b,d,e,function(a,b,c){a.h=b[c],a.s=b[c+1],a.i=b[c+2],a.a=b[c+3]},!0);return this.__lastOperationType="hsi",f},a.ImageData.prototype.setHSIPixels=function(a){d(this,a,function(a,b,c){b[c]=a.h,b[c+1]=a.s,b[c+2]=a.i,b[c+3]=a.a},!0),this.__lastOperationType="hsi"}}(gorgeous);