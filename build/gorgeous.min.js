/*! Gorgeous.JS v0.0.1 2015-05-24 */
var gorgeous={};!function(){"use strict";var a=gorgeous;a.loadImage=function(a,b){var c=new Image;return c.onload=function(a){b(c,a)},c.src=a,c},a.createCanvasContext=function(a,b){var c=document.createElement("canvas");return c.width=a||0,c.height=b||0,c.getContext("2d")},a.makeBlank=function(b,c,d){b.ctx=a.createCanvasContext(c||1,d||1),b.width=c||1,b.height=d||1,b.nativeImageData=b.ctx.getImageData(0,0,c||1,d||1),b.data=b.nativeImageData.data},a.createBlankImageData=function(b,c,d){function e(){}e.prototype=b.prototype;var f=new e;return a.makeBlank(f,c,d),f}}(),function(){"use strict";function a(a,b,c,d,e,f){return a=a||0,b=b||0,c=c||e-a,d=d||f-b,0>a||a>e||0>b||b>f||c+a>e||0>c||d+b>f||0>d?!1:[a,b,a+c,b+d]}function b(a,b,c){a.width=b,a.height=c,a.ctx.canvas.width=b,a.ctx.canvas.height=c}function c(a,b){d(a,b.getContext("2d"))}function d(a,b){h(a,b.getImageData(0,0,b.canvas.width,b.canvas.height))}function e(a,b,c){var d=new Image;d.onload=function(){f(a,d),"function"==typeof c&&c(a)},d.src=b}function f(a,c){var d=a.ctx;b(a,c.width,c.height),d.drawImage(c,0,0,c.width,c.height),a.pullChange()}function g(a,c){var d=a.ctx;b(a,c.width,c.height),d.putImageData(c.nativeImageData,0,0),a.pullChange()}function h(a,c){var d=a.ctx;b(a,c.width,c.height),d.putImageData(c,0,0),a.pullChange()}function i(b,c,d,e,f,g){var h=a(c,d,e,f,b.width,b.height);if(!h)throw new Error("range error");c=h[0],d=h[1];for(var i=h[2],j=h[3],k=[],l=c;i>l;l++)k[l]=[];var m=b.data;k.left=c,k.top=d,k.width=e,k.height=f,k.right=i,k.bottom=j,k.each=function(a){for(var b=this.top;b<this.bottom;b++)for(var c=this.left;c<this.right;c++)a(this[c][b],c,b);return this};for(var n=d;j>n;n++)for(var o=c;i>o;o++){k[o][n]={};var p=4*(n*b.width+o);g(k[o][n],m,p)}return k.every=function(a,b){if(!(a instanceof Function))return!1;for(var c=this.top;c<this.bottom;c++)for(var d=this.left;d<this.right;d++)if(!a(this[d][c],d,c))return b instanceof Function&&b(this[d][c],d,c),!1;return!0},k}function j(a,b,c){for(var d=a.data,e=b.top;e<b.bottom;e++)for(var f=b.left;f<b.right;f++){var g=4*(e*a.width+f);c(b[f][e],d,g)}a.pushChange()}var k=gorgeous;k.ImageData=function(a,b){if(!(this instanceof k.ImageData))return new k.ImageData(a,b);if(k.makeBlank(this,1,1),a instanceof Image)f(this,a);else if("string"==typeof a)e(this,a,b);else if(a instanceof HTMLCanvasElement)c(this,a);else if(a instanceof CanvasRenderingContext2D)d(this,a);else if(a instanceof k.ImageData)g(this,a);else{if(!(a instanceof ImageData))throw new Error("Need a source to create g.ImageData.");h(this,a)}},k.ImageData.prototype.pushChange=function(){this.ctx.putImageData(this.nativeImageData,0,0)},k.ImageData.prototype.pullChange=function(){this.nativeImageData=this.ctx.getImageData(0,0,this.width,this.height),this.data=this.nativeImageData.data},k.ImageData.prototype.getDataURL=function(){return this.ctx.canvas.toDataURL()},k.ImageData.prototype.getImage=function(a){var b=new Image;return b.onload=function(){"function"==typeof a&&a(b)},b.src=this.getDataURL(),b},k.ImageData.prototype.getSize=function(){return{width:this.width,height:this.height}},k.ImageData.prototype.getPixels=function(a,b,c,d){return i(this,a,b,c,d,function(a,b,c){a.r=b[c],a.g=b[c+1],a.b=b[c+2],a.a=b[c+3]})},k.ImageData.prototype.setPixels=function(a){j(this,a,function(a,b,c){b[c]=a.r,b[c+1]=a.g,b[c+2]=a.b,b[c+3]=a.a})},k.ImageData.prototype.getR=function(){for(var a=new k.ImageData(this),b=a.data,c=0;c<b.length;c+=4)b[c+1]=b[c+2]=0;return a.ctx.putImageData(a.nativeImageData,0,0),a},k.ImageData.prototype.getG=function(){for(var a=new k.ImageData(this),b=a.data,c=0;c<b.length;c+=4)b[c]=b[c+2]=0;return a.ctx.putImageData(a.nativeImageData,0,0),a},k.ImageData.prototype.getB=function(){for(var a=new k.ImageData(this),b=a.data,c=0;c<b.length;c+=4)b[c]=b[c+1]=0;return a.ctx.putImageData(a.nativeImageData,0,0),a},k.ImageData.prototype.copy=function(b,c,d,e){var f=a(b,c,d,e,this.width,this.height);if(!f)throw new Error("range error");b=f[0],c=f[1];var g=f[2],h=f[3];return this.ctx.getImageData(b,c,g-b,h-e)},k.ImageData.prototype.paste=function(a,b,c,d,e){d=d&&d<a.width?d:a.width,e=e&&e<a.height?e:a.height,this.pushChange()},k.GrayImageData=function(a,b,c){function d(a){for(var b=a.data,c=0;c<b.length;c+=4){var d=(b[c]+b[c+1]+b[c+2])/3;b[c]=b[c+1]=b[c+2]=d}}function e(a){if("function"==typeof b){var c=k.ImageData.prototype.getPixels.call(a);b(c),a.setPixels(c)}else d(a.nativeImageData),a.ctx.putImageData(a.nativeImageData,0,0)}if(!(this instanceof k.GrayImageData))return new k.GrayImageData(a,b,c);if(a instanceof k.GrayImageData)k.ImageData.call(this,a);else if("string"==typeof a){var f=this;k.ImageData.call(this,a,function(){e(f),"function"==typeof c&&c(f)})}else if(a instanceof HTMLCanvasElement||a instanceof CanvasRenderingContext2D)k.GrayImageData.call(this,new k.ImageData(a),b);else{if(!(a instanceof k.ImageData||a instanceof Image||a instanceof ImageData))throw new Error("Need a source to create g.GrayImageData.");k.ImageData.call(this,a),e(this)}},k.GrayImageData.prototype=Object.create(k.ImageData.prototype),k.GrayImageData.prototype.constructor=k.GrayImageData,k.GrayImageData.prototype.getPixels=function(a,b,c,d){return i(this,a,b,c,d,function(a,b,c){a.l=b[c],a.a=b[c+3]})},k.GrayImageData.prototype.setPixels=function(a){j(this,a,function(a,b,c){b[c]=b[c+1]=b[c+2]=a.l,b[c+3]=a.a})},k.BinaryImageData=function(a,b,c){function d(a){for(var b=a.data,c=0,d=0;d<b.length;d+=4)c+=b[d];for(var e=c/b.length*4,d=0;d<b.length;d+=4)b[d]<=e?b[d]=b[d+1]=b[d+2]=0:b[d]=b[d+1]=b[d+2]=255}function e(a){if("function"==typeof b){console.log("threshold");var c=k.GrayImageData.prototype.getPixels.call(a);b(c),a.setPixels(c)}else d(a.nativeImageData),a.ctx.putImageData(a.nativeImageData,0,0)}if(!(this instanceof k.BinaryImageData))return new k.BinaryImageData(a,b,c);if(a instanceof k.BinaryImageData)k.GrayImageData.call(this,a);else if("string"==typeof a){var f=this;k.GrayImageData.call(this,a,null,function(){e(f),"function"==typeof c&&c(f)})}else if(a instanceof HTMLCanvasElement||a instanceof CanvasRenderingContext2D)k.BinaryImageData.call(this,new k.GrayImageData(a),b);else{if(!(a instanceof k.ImageData||a instanceof Image||a instanceof ImageData))throw new Error("Need a source to create g.BinaryImageData.");k.GrayImageData.call(this,a),e(this)}},k.BinaryImageData.prototype=Object.create(k.GrayImageData.prototype),k.BinaryImageData.prototype.constructor=k.BinaryImageData,k.BinaryImageData.prototype.setPixels=function(a){j(this,a,function(a,b,c){if(255!==a.l&&0!==a.l)throw new Error("binary image only accepts 0 or 255 as lightness.");b[c]=b[c+1]=b[c+2]=a.l,b[c+3]=a.a})}}(),function(){"use strict";function a(a,b){return a.width===b.width&&a.height===b.height}function b(b,c,e){if(a(b,c)){var f;return c instanceof b.constructor?c.constructor!==b.constructor?(f=new b.constructor(c),e(b,f,f)):(f=new b.constructor(b),e(f,c,f)):(f=new c.constructor(b),e(f,c,f)),f}throw d}var c=gorgeous,d=new Error("Arithmetic Operations can only be performed on two ImageData in the same size.");c.ImageData.prototype.add=function(a){function c(a,b,c){for(var d=c.data,e=0;e<d.length;e+=4)d[e]+=b.data[e],d[e+1]+=b.data[e+1],d[e+2]+=b.data[e+2],d[e+3]=255;c.ctx.putImageData(c.nativeImageData,0,0)}return b(this,a,c)},c.ImageData.prototype.sub=function(a){function c(a,b,c){for(var d=c.data,e=0;e<d.length;e+=4){var f=a.data[e]-b.data[e];d[e]=f>0?f:0,f=a.data[e+1]-b.data[e+1],d[e+1]=f>0?f:0,f=a.data[e+2]-b.data[e+2],d[e+2]=f>0?f:0,d[e+3]=255}c.ctx.putImageData(c.nativeImageData,0,0)}return b(this,a,c)},c.ImageData.prototype.mul=function(a){function c(a,b,c){for(var d=c.data,e=0;e<d.length;e+=4)d[e]*=b.data[e],d[e+1]*=b.data[e+1],d[e+2]*=b.data[e+2],d[e+3]=255;c.ctx.putImageData(c.nativeImageData,0,0)}return b(this,a,c)},c.ImageData.prototype.div=function(a){function c(a,b,c){for(var d=c.data,e=0;e<d.length;e+=4)d[e]/=b.data[e]+1e-5,d[e+1]/=b.data[e+1]+1e-5,d[e+2]/=b.data[e+2]+1e-5,d[e+3]=255;c.ctx.putImageData(c.nativeImageData,0,0)}return b(this,a,c)}}(),function(){"use strict";function a(a,b,c){var d=a-b,e=a-c,f=b-c,g=Math.acos(.5*(d+e)/(Math.sqrt(d*d+e*f)+1e-5));return 255*(b>=c?g:2*Math.PI-g)/(2*Math.PI)}function b(a,b,c){var d=Math.min(a,b,c);return 255*(1-3*d/(a+b+c+1e-5))}function c(a,b,c){return(a+b+c)/3}var d=gorgeous;d.ImageData.prototype.getH=function(){for(var b=d.createBlankImageData(d.GrayImageData,this.width,this.height),c=0;c<this.data.length;c+=4)b.data[c]=b.data[c+1]=b.data[c+2]=a(this.data[c],this.data[c+1],this.data[c+2]),b.data[c+3]=255;return b.ctx.putImageData(b.nativeImageData,0,0),b},d.ImageData.prototype.getS=function(){for(var a=d.createBlankImageData(d.GrayImageData,this.width,this.height),c=0;c<this.data.length;c+=4)a.data[c]=a.data[c+1]=a.data[c+2]=b(this.data[c],this.data[c+1],this.data[c+2]),a.data[c+3]=255;return a.ctx.putImageData(a.nativeImageData,0,0),a},d.ImageData.prototype.getI=function(){for(var a=d.createBlankImageData(d.GrayImageData,this.width,this.height),b=0;b<this.data.length;b+=4)a.data[b]=a.data[b+1]=a.data[b+2]=c(this.data[b],this.data[b+1],this.data[b+2]),a.data[b+3]=255;return a.ctx.putImageData(a.nativeImageData,0,0),a},d.ImageData.prototype.getHSI=function(){for(var e=d.createBlankImageData(d.ImageData,this.width,this.height),f=0;f<this.data.length;f+=4)e.data[f]=a(this.data[f],this.data[f+1],this.data[f+2]),e.data[f+1]=b(this.data[f],this.data[f+1],this.data[f+2]),e.data[f+2]=c(this.data[f],this.data[f+1],this.data[f+2]),e.data[f+3]=255;return e.ctx.putImageData(e.nativeImageData,0,0),e},d.ImageData.prototype.getRGB=function(){for(var a=d.createBlankImageData(d.ImageData,this.width,this.height),b=0;b<this.data.length;b+=4){var c=d.hsi2rgb([this.data[b],this.data[b+1],this.data[b+2]]);a.data[b]=c[0],a.data[b+1]=c[1],a.data[b+2]=c[2],a.data[b+3]=255}return a.ctx.putImageData(a.nativeImageData,0,0),a},d.rgb2hsi=function(d){if(d instanceof Array)return[a(d[0],d[1],d[2]),b(d[0],d[1],d[2]),c(d[0],d[1],d[2])];throw new Error("Please call g.rgb2hsi() as g.rgb2hsi([R, G, B]).")},d.hsi2rgb=function(a){function b(a,b){return b*(1-a)}function c(a,b,c){return c*(1+b*Math.cos(a)/Math.cos(Math.PI/3-a))}function d(a,b,c){return 3*a-b-c}var e=120*Math.PI/180,f=240*Math.PI/180;if(a instanceof Array){var g,h,i,j,k,l;return g=a[0]/255*2*Math.PI,h=a[1]/255,i=a[2],g>f?(g-=f,k=b(h,i),l=c(g,h,i),j=d(i,k,l)):g>e?(g-=e,j=b(h,i),k=c(g,h,i),l=d(i,k,j)):(l=b(h,i),j=c(g,h,i),k=d(i,j,l)),[j,k,l]}throw new Error("Please call g.hsi2rgb() as g.hsi2rgb([H, S, I]).")}}(),function(){"use strict";function a(a,b){for(var c=a.constructor.call(null,a),d=0;d<c.data.length;d+=4)for(var e=d;d+3>e;e++)b(c.data,e);return c.pushChange(),c}var b=gorgeous;b.ImageData.prototype.negative=function(){return a(this,function(a,b){a[b]=255-a[b]})},b.ImageData.prototype.log=function(b){if(1>b||b>5)throw new Error("log() need argument n greater than 1 & less than 5.");var c=255/Math.log(256);return a(this,function(a,b){a[b]=Math.log(a[b]+1)*c})},b.ImageData.prototype.exp=function(b){if(1>b||b>5)throw new Error("exp() need argument n greater than 1 & less than 5.");var c=255/(Math.pow(b,255)-1);return a(this,function(a,d){a[d]=(Math.pow(b,a[d])-1)*c})},b.ImageData.prototype.root=function(b){if(1>b||b>5)throw new Error("root() need argument n greater than 1 & less than 5.");var c=1/b,d=255/Math.pow(255,c);return a(this,function(a,b){a[b]=Math.pow(a[b],c)*d})},b.ImageData.prototype.pow=function(b){if(1>b||b>5)throw new Error("pow() need argument n greater than 1 & less than 5.");var c=255/Math.pow(255,b);return a(this,function(a,d){a[d]=Math.pow(a[d],b)*c})},b.ImageData.prototype.transform=function(a){}}();